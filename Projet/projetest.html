<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

	<script type="importmap">
  	{
    	"imports": {
     	 	"three": "https://unpkg.com/three@0.148.0/build/three.module.js",
      	"three/addons/": "https://unpkg.com/three@0.148.0/examples/jsm/"
    	}
  	}
	</script>

		<script type="module">
			import * as THREE from 'three';
			import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
			import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

			var options = {
            enableHighAccuracy: true,
            timeout: 5000,
            maximumAge: 0
        };
        
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        
        var paddleWidth = 100;
        var paddleHeight = 20;
        var paddleDepth = 20;
        var paddleGeometry = new THREE.BoxGeometry(paddleWidth, paddleHeight, paddleDepth);
        var paddleMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
        var paddle = new THREE.Mesh(paddleGeometry, paddleMaterial);
        paddle.position.set(0, -(window.innerHeight / 2) + paddleHeight, 0);
        scene.add(paddle);

        
        var ballRadius = 20;
        var ballSegments = 32;
        var ballGeometry = new THREE.SphereGeometry(ballRadius, ballSegments, ballSegments);
        var ballMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
        var ball = new THREE.Mesh(ballGeometry, ballMaterial);
        ball.position.set(0, paddle.position.y + paddleHeight + ballRadius, 0);
        scene.add(ball);

        
        var ballSpeed = 200;
        var ballDirection = new THREE.Vector3(1, 1, 0);

        
        document.addEventListener('touchmove', function (event) {
        paddle.position.x = (event.touches[0].clientX / window.innerWidth) * (window.innerWidth - paddleWidth / 2) - (window.innerWidth / 2) + paddleWidth / 2;
        });

        
        var render = function () {
        requestAnimationFrame(render);

        
        ball.position.x += ballDirection.x * ballSpeed * (1 / 60);
        ball.position.y += ballDirection.y * ballSpeed * (1 / 60);

        
        if (ball.position.y < paddle.position.y + paddleHeight / 2 &&
        ball.position.y > paddle.position.y - paddleHeight / 2 &&
        ball.position.x < paddle.position.x + paddleWidth / 2 &&
        ball.position.x > paddle.position.x - paddleWidth / 2) {
        ballDirection.y = -ballDirection.y;
        }

        
        if (ball.position.x > window.innerWidth / 2 - ballRadius ||
        ball.position.x < -window.innerWidth / 2 + ballRadius) {
        ballDirection.x = -ballDirection.x;
        }
        if (ball.position.y > window.innerHeight / 2 - ballRadius ||
        ball.position.y < -window.innerHeight/ 2 + ballRadius) {
                ballDirection.y = -ballDirection.y;
        }

        renderer.render(scene, camera);
        };

        render();


		</script>
	</body>
</html>